"use strict";(self.webpackChunkecommerce_alte=self.webpackChunkecommerce_alte||[]).push([[829],{829:(M,g,d)=>{d.r(g),d.d(g,{ProductsModule:()=>Q});var c=d(6895),p=d(3128),t=d(8256),f=d(9171);const v=function(e){return["/manager/products/edit",e]};function Z(e,i){if(1&e){const r=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",4),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"button",5),t._uU(12,"Edit"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(){const l=t.CHM(r).$implicit,m=t.oxw();return t.KtG(m.deleteItem(l.id))}),t._uU(14,"X"),t.qZA()()()}if(2&e){const r=i.$implicit;t.xp6(2),t.Q6J("src",r.image,t.LSH),t.xp6(2),t.Oqu(null==r?null:r.name),t.xp6(2),t.Oqu(t.xi3(7,5,null==r?null:r.price,"USD")),t.xp6(3),t.Oqu(null==r||null==r.category?null:r.category.name),t.xp6(2),t.Q6J("routerLink",t.VKq(8,v,r.id))}}let A=(()=>{class e{constructor(r){this.productService=r,this.products=[]}ngOnInit(){this.getAll()}getAll(){this.productService.getProducts({}).pipe().subscribe(r=>{this.products=r})}deleteItem(r){this.productService.deleteProduct(r).pipe().subscribe(()=>{this.getAll()})}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(f.M5))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products"]],decls:17,vars:1,consts:[[1,"p-2","d-flex","justify-content-end"],["routerLink","/manager/products/create",1,"btn","btn-dark"],[1,"table"],[4,"ngFor","ngForOf"],["alt","product","width","100px",3,"src"],[1,"btn","btn-dark","mr-2",3,"routerLink"],[1,"btn","btn-1","btn-danger",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"button",1),t._uU(2,"Add"),t.qZA()(),t.TgZ(3,"table",2)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Img"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Price"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Category"),t.qZA(),t._UZ(14,"th"),t.qZA()(),t.TgZ(15,"tbody"),t.YNc(16,Z,15,10,"tr",3),t.qZA()()),2&r&&(t.xp6(16),t.Q6J("ngForOf",o.products))},dependencies:[c.sg,p.rH,c.H9],styles:[".btn-1[_ngcontent-%COMP%]{border-radius:30px;margin-left:10px}"]}),e})();var n=d(433),h=d(3900),T=d(9646),q=d(6943);function x(e,i){1&e&&(t.TgZ(0,"div"),t._uU(1,"Name is required"),t.qZA())}function P(e,i){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,x,2,0,"div",17),t.qZA()),2&e){const r=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=r.form.get("name"))||null==o.errors?null:o.errors.required)}}function C(e,i){1&e&&(t.TgZ(0,"div"),t._uU(1,"Description is required"),t.qZA())}function y(e,i){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,C,2,0,"div",17),t.qZA()),2&e){const r=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=r.form.get("description"))||null==o.errors?null:o.errors.required)}}function I(e,i){1&e&&(t.TgZ(0,"div"),t._uU(1,"Image is required"),t.qZA())}function b(e,i){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,I,2,0,"div",17),t.qZA()),2&e){const r=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=r.form.get("image"))||null==o.errors?null:o.errors.required)}}function N(e,i){if(1&e&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&e){const r=i.$implicit;t.Q6J("value",r.id),t.xp6(1),t.hij(" ",r.name," ")}}function U(e,i){1&e&&(t.TgZ(0,"div"),t._uU(1,"Category is required"),t.qZA())}function J(e,i){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,U,2,0,"div",17),t.qZA()),2&e){const r=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=r.form.get("categoryId"))||null==o.errors?null:o.errors.required)}}function E(e,i){1&e&&(t.TgZ(0,"div"),t._uU(1,"Price is required"),t.qZA())}function Y(e,i){if(1&e&&(t.TgZ(0,"div",16),t.YNc(1,E,2,0,"div",17),t.qZA()),2&e){const r=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",null==(o=r.form.get("price"))||null==o.errors?null:o.errors.required)}}let _=(()=>{class e{constructor(r,o,u,l){this.categoryService=r,this.productService=o,this.route=u,this.router=l,this.form=new n.cw({id:new n.NI(null),name:new n.NI("",n.kI.required),description:new n.NI("",n.kI.required),image:new n.NI("",n.kI.required),price:new n.NI("",n.kI.required),categoryId:new n.NI("",n.kI.required)}),this.categories$=this.categoryService.getAll()}ngOnInit(){this.route.params.pipe((0,h.w)(r=>r.id?this.productService.getProduct(r.id):(0,T.of)(null))).subscribe(r=>{r&&this.form.patchValue({...r,categoryId:r.category.id})})}submit(){this.form.markAllAsTouched(),!this.form.invalid&&(this.form.value.id?this.productService.updateProduct(this.form.value.id,this.form.value).pipe().subscribe(()=>{this.router.navigate(["/manager/products"]).then(()=>{this.form.reset()})}):this.productService.createProduct(this.form.value).pipe().subscribe(()=>{this.router.navigate(["/manager/products"]).then(()=>{this.form.reset()})}))}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(q.H),t.Y36(f.M5),t.Y36(p.gz),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-add-edit"]],decls:31,vars:9,consts:[[1,"product-layout"],[3,"formGroup","ngSubmit"],[1,"form-group","mt-5"],["for","name"],["type","text","id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","mat-error mt-2 error",4,"ngIf"],[1,"form-group","mt-3"],["for","description"],["type","text","id","description","placeholder","Description","formControlName","description",1,"form-control"],["for","image"],["type","text","id","image","placeholder","Image url","formControlName","image",1,"form-control"],["formControlName","categoryId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","price"],["type","number","id","price","placeholder","Price","formControlName","price",1,"form-control"],["type","submit",1,"btn","btn-dark","mt-3"],[1,"mat-error","mt-2","error"],[4,"ngIf"],[3,"value"]],template:function(r,o){if(1&r&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Name"),t.qZA(),t._UZ(5,"input",4),t.YNc(6,P,2,1,"div",5),t.qZA(),t.TgZ(7,"div",6)(8,"label",7),t._uU(9,"Description"),t.qZA(),t._UZ(10,"textarea",8),t.YNc(11,y,2,1,"div",5),t.qZA(),t.TgZ(12,"div",6)(13,"label",9),t._uU(14,"Image url"),t.qZA(),t._UZ(15,"input",10),t.YNc(16,b,2,1,"div",5),t.qZA(),t.TgZ(17,"div",6)(18,"label",7),t._uU(19,"Category"),t.qZA(),t.TgZ(20,"select",11),t.YNc(21,N,2,2,"option",12),t.ALo(22,"async"),t.qZA(),t.YNc(23,J,2,1,"div",5),t.qZA(),t.TgZ(24,"div",6)(25,"label",13),t._uU(26,"Price"),t.qZA(),t._UZ(27,"input",14),t.YNc(28,Y,2,1,"div",5),t.qZA(),t.TgZ(29,"button",15),t._uU(30,"Submit"),t.qZA()()()),2&r){let u,l,m,s,a;t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",(null==(u=o.form.get("name"))?null:u.invalid)&&(null==(u=o.form.get("name"))?null:u.touched)),t.xp6(5),t.Q6J("ngIf",(null==(l=o.form.get("description"))?null:l.invalid)&&(null==(l=o.form.get("description"))?null:l.touched)),t.xp6(5),t.Q6J("ngIf",(null==(m=o.form.get("image"))?null:m.invalid)&&(null==(m=o.form.get("image"))?null:m.touched)),t.xp6(5),t.Q6J("ngForOf",t.lcZ(22,7,o.categories$)),t.xp6(2),t.Q6J("ngIf",(null==(s=o.form.get("categoryId"))?null:s.invalid)&&(null==(s=o.form.get("categoryId"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(a=o.form.get("price"))?null:a.invalid)&&(null==(a=o.form.get("price"))?null:a.touched))}},dependencies:[c.sg,c.O5,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,n.sg,n.u,c.Ov],styles:[".product-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;grid-gap:20px;align-self:center;margin-left:500px}.error[_ngcontent-%COMP%]{border:1px solid red;width:160px;text-align:center}"]}),e})();const S=[{path:"",component:A},{path:"create",component:_},{path:"edit/:id",component:_}];let w=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(S),p.Bz]}),e})(),Q=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,w,n.UX]}),e})()}}]);